(this.webpackJsonpui=this.webpackJsonpui||[]).push([[0],{380:function(e,a,t){e.exports=t(868)},385:function(e,a,t){},386:function(e,a,t){},868:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(25),i=t.n(l),o=(t(385),t(59)),c=t.n(o),s=t(105),u=t(35),m=(t(386),t(877)),d=t(168),h=t.n(d),p=t(869),g=t(872),f=t(870),y=t(878),E=t(359),b=function(e){var a=e.filterValues,t=(e.title,e.height),l=void 0===t?500:t,i=e.rawData,o=e.isLoading,m=Object(n.useState)({xAxisData:[],yAxisData:[]}),d=Object(u.a)(m,2),b=d[0],v=d[1],x=function(e){return"Deaths"===e?"#820014":"Recovered"===e?"#52c41a":"Active"===e?"#f5222d":"Confirmed"===e?"#fadb14":"Extrapolation"===e?"#bfbfbf":void 0},w=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n,r,l,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=2;break}return e.abrupt("return");case 2:console.log("fetching data"),t=function(e){return console.log("formatting xData"),e.xTimestamps.map((function(e){return E.DateTime.fromISO(e).toLocaleString({month:"short",day:"numeric"})}))},console.log("filterValues: ",a),n=function(e,t){var n=[];for(var r in e.ySeries)n.push({name:r,series:e.ySeries[r]});return n.push({name:"Extrapolation",series:[],markArea:[[{name:"Extrapolation",xAxis:t[t.length-a.extrapolatedDays]},{xAxis:t[t.length-1]}]]}),console.log("yAxisData: ",n),n},r=i,console.log("data: ",r),console.log("formatXData"),l=t(r),console.log("formatYData"),o=n(r,l),s={xAxisData:l,yAxisData:o},console.log("axisData: ",s),v(s);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){w()}),[i]);var C={xAxis:{type:"category",data:b.xAxisData},yAxis:{type:a.isLogarithmic?"log":"value"},legend:{data:b.yAxisData.map((function(e){return e.name})).filter((function(e){return"timestamp"!==e&&"Extrapolation"!==e})),selected:{"Estimated confirmed 0.5%":!1,"Estimated confirmed 4.0%":!1}},series:b.yAxisData.map((function(e){var a=e.series,t=e.markArea,n=e.name;return{name:n,itemStyle:{color:x(n)},lineStyle:{width:3,color:x(n)},data:a,markArea:{data:t},type:"line",smooth:!0}})),tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},dataZoom:[{type:"inside"},{handleIcon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4v1.3h1.3v-1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7V23h6.6V24.4z M13.3,19.6H6.7v-1.4h6.6V19.6z",handleSize:"80%",handleStyle:{color:"#fff",shadowBlur:3,shadowColor:"rgba(0, 0, 0, 0.6)",shadowOffsetX:2,shadowOffsetY:2}}]},S=r.a.createElement(n.Fragment,null,r.a.createElement("p",null,r.a.createElement("b",null,"Estimated Confirmed:")),"is calculated by taking the deaths as a base value and calculating the",r.a.createElement("br",null),"number of infected by using a deathrate of 0.5% or 4.0%. This shows a more",r.a.createElement("br",null),"realistic number of infections, since the number of deaths is the most",r.a.createElement("br",null),"reliable number. Click on the metric on top of the chart to see the values.",r.a.createElement("br",null),r.a.createElement("br",null),"Inspiration for this dashboard:"," ",r.a.createElement("a",{href:"https://medium.com/@tomaspueyo/coronavirus-act-today-or-people-will-die-f4d3d9cd99ca",target:"_blank",rel:"noopener noreferrer"},"Article"));return r.a.createElement(n.Fragment,null,r.a.createElement(p.a,{spinning:o,size:"large"},r.a.createElement(g.a,{hoverable:!0,title:"Infections and deaths of all countries",size:"small",extra:r.a.createElement(f.a,{placement:"leftTop",title:"Metrics Help",content:S,trigger:"hover"},r.a.createElement(y.a,{size:"small"},"Metrics Help"))},r.a.createElement(h.a,{option:C,notMerge:!0,lazyUpdate:!0,style:{height:l,width:"100%"}}))))},v=t(873),x=t(113),w=v.a.Title,C=function(e){var a=e.rawData,t=e.isLoading,l=e.filterValues,i={width:"100%",marginBottom:".5em"},o={marginBottom:0},c=Object(n.useState)({deaths:{curr:0,extr:0},confirmed:{curr:0,extr:0},recovered:{curr:0,extr:0},active:{curr:0,extr:0}}),s=Object(u.a)(c,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){a&&function(){var e=a.ySeries,t=e.Deaths.length,n={deaths:{curr:e.Deaths[t-l.extrapolatedDays].toLocaleString(),extr:e.Deaths[t-1].toLocaleString()},confirmed:{curr:e.Confirmed[t-l.extrapolatedDays].toLocaleString(),extr:e.Confirmed[t-1].toLocaleString()},recovered:{curr:e.Recovered[t-l.extrapolatedDays].toLocaleString()},active:{curr:e.Active[t-l.extrapolatedDays].toLocaleString()}};d(n)}()}),[a]),r.a.createElement(n.Fragment,null,r.a.createElement(x.a,null,r.a.createElement(g.a,{title:"Total Infections",hoverable:!0,size:"small",style:i,loading:t},r.a.createElement("p",{style:o},"Current:"),r.a.createElement(w,{type:"danger",level:3,style:o},m.confirmed.curr),r.a.createElement("p",{style:o},"With extrapolation:"),r.a.createElement(w,{type:"danger",level:3,style:o},m.confirmed.extr))),r.a.createElement(x.a,null,r.a.createElement(g.a,{title:"Total Deaths",hoverable:!0,size:"small",style:i,loading:t},r.a.createElement("p",{style:o},"Current:"),r.a.createElement(w,{type:"danger",level:3,style:o},m.deaths.curr),r.a.createElement("p",{style:o},"With extrapolation:"),r.a.createElement(w,{type:"danger",level:3,style:o},m.deaths.extr))),r.a.createElement(x.a,null,r.a.createElement(g.a,{title:"Active",hoverable:!0,size:"small",style:i,loading:t},r.a.createElement(w,{type:"primary",level:3,style:o},m.active.curr))),r.a.createElement(x.a,null,r.a.createElement(g.a,{title:"Recovered",hoverable:!0,size:"small",style:i,loading:t},r.a.createElement(w,{type:"primary",level:3,style:o},m.recovered.curr))))},S=t(87),D=t(874),O=t(871),j=t(176),A=t.n(j),k=t(236),z=t.n(k),L=D.a.Option;t(792);var M=function(e){var a=e.filterValues,t=e.setFilterValues,l=e.height,i=void 0===l?700:l,o=Object(n.useState)("Confirmed"),m=Object(u.a)(o,2),d=m[0],f=m[1],y=Object(n.useState)(!1),E=Object(u.a)(y,2),b=E[0],v=E[1],x=Object(n.useState)(!1),w=Object(u.a)(x,2),C=w[0],j=w[1],k=Object(n.useState)([]),M=Object(u.a)(k,2),B=M[0],T=M[1],V=Object(n.useState)({extr:10,curr:10}),I=Object(u.a)(V,2),_=I[0],F=I[1],R=Object(n.useState)(!1),U=Object(u.a)(R,2),G=U[0],H=U[1],N={tooltip:{show:!0},visualMap:{left:"right",min:1,max:b?_.extr:_.curr,inRange:{color:["#313695","#4575b4","#74add1","#abd9e9","#e0f3f8","#ffffbf","#fee090","#fdae61","#f46d43","#d73027","#a50026"]},text:["High","Low"],calculable:!0},series:[{name:d,type:"map",emphasis:{label:{show:!0}},map:"world",roam:!0,nameProperty:"NAME",data:B.map((function(e){return{name:"US"===e.country?"United States":e.country,value:b?e.extrapolated_metric_value:e.metric_value}}))}]},P=function(){var e=Object(s.a)(c.a.mark((function e(){var t,n,r,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,H(!0),e.next=4,A.a.get("http://localhost:8080/by_country",{params:{extrapolation_days:a.extrapolatedDays,metric:d.toLowerCase()}});case 4:t=e.sent,n=t.data,T(n),r=z.a.maxBy(n,"metric_value").metric_value,l=z.a.maxBy(n,"extrapolated_metric_value").extrapolated_metric_value,F({curr:r,extr:l}),H(!1),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(0),console.log("Err fetching data by_country: ",e.t0.message),H(!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){var e=setTimeout((function(){P()}),1e3);return function(){return clearTimeout(e)}}),[d,a.extrapolatedDays]);var K={click:function(e){console.log("e.name: ",e.name);var n=e.name;"United States"===n&&(n="US"),t(Object(S.a)({},a,{selectedCountries:[n]}))}};return r.a.createElement(p.a,{spinning:G,size:"large"},r.a.createElement(g.a,{hoverable:!0,title:"World Map",size:"small",extra:r.a.createElement(n.Fragment,null,"Extrapolated:\xa0\xa0",r.a.createElement(O.a,{onChange:function(e){return v(e)},checked:b}),"\xa0\xa0Social Distancing:\xa0\xa0",r.a.createElement(O.a,{onChange:function(e){return j(e)},checked:C,disabled:!b}),"\xa0\xa0 Select Metric:\xa0\xa0",r.a.createElement(D.a,{placeholder:"Select metric...",onChange:function(e){return f(e)},value:d,style:{width:"10em"}},["Active","Confirmed","Deaths","Recovered"].map((function(e){return r.a.createElement(L,{key:e},e)}))))},r.a.createElement(h.a,{option:N,notMerge:!0,lazyUpdate:!0,style:{height:i,width:"100%"},onEvents:K})))},B=t(49),T=t(875),V=t(876),I=["Thailand","Japan","Singapore","Nepal","Malaysia","Canada","Australia","Cambodia","Sri,Lanka","Germany","Finland","United,Arab,Emirates","Philippines","India","Italy","Sweden","Spain","Belgium","Egypt","Lebanon","Iraq","Oman","Afghanistan","Bahrain","Kuwait","Algeria","Croatia","Switzerland","Austria","Israel","Pakistan","Brazil","Georgia","Greece","North,Macedonia","Norway","Romania","Estonia","San,Marino","Belarus","Iceland","Lithuania","Mexico","New,Zealand","Nigeria","Ireland","Luxembourg","Monaco","Qatar","Ecuador","Azerbaijan","Armenia","Dominican,Republic","Indonesia","Portugal","Andorra","Latvia","Morocco","Saudi,Arabia","Senegal","Argentina","Chile","Jordan","Ukraine","Hungary","Liechtenstein","Poland","Tunisia","Bosnia,and,Herzegovina","Slovenia","South,Africa","Bhutan","Cameroon","Colombia","Costa,Rica","Peru","Serbia","Slovakia","Togo","Malta","Martinique","Bulgaria","Maldives","Bangladesh","Paraguay","Albania","Cyprus","Brunei","US","Burkina,Faso","Holy,See","Mongolia","Panama","China","Iran","Korea,,South","France","Cruise,Ship","Denmark","Czechia","Taiwan*","Vietnam","Russia","Moldova","Bolivia","Honduras","United,Kingdom","Congo,(Kinshasa)","Cote,d'Ivoire","Jamaica","Turkey","Cuba","Guyana","Kazakhstan","Ethiopia","Sudan","Guinea","Kenya","Antigua,and,Barbuda","Uruguay","Ghana","Namibia","Seychelles","Trinidad,and,Tobago","Venezuela","Eswatini","Gabon","Guatemala","Mauritania","Rwanda","Saint,Lucia","Saint,Vincent,and,the,Grenadines","Suriname","Kosovo","Central,African,Republic","Congo,(Brazzaville)","Equatorial,Guinea","Uzbekistan","Netherlands","Benin","Liberia","Somalia","Tanzania","Barbados","Montenegro","Kyrgyzstan","Mauritius","Zambia","Djibouti","Gambia,,The","Bahamas,,The","Chad","El,Salvador","Fiji","Nicaragua","Madagascar","Haiti","Angola","Cabo,Verde","Niger","Papua,New,Guinea","Zimbabwe","Cape,Verde","East,Timor","Eritrea","Uganda"],_=D.a.Option,F=function(e){var a=e.filterValues,t=e.setFilterValues;return r.a.createElement(g.a,{hoverable:!0,size:"small"},r.a.createElement(x.a,{gutter:16},r.a.createElement(B.a,{span:8},r.a.createElement(T.a,{style:{width:"100%"}},r.a.createElement(T.a.Item,{label:"Filter by Countries",style:{marginBottom:0,width:"100%"}},r.a.createElement(D.a,{mode:"multiple",style:{width:"100%"},placeholder:"Filter by Countries...",onChange:function(e){return t(Object(S.a)({},a,{selectedCountries:e}))},value:a.selectedCountries,size:"small"},I.map((function(e){return r.a.createElement(_,{key:e},e)})))))),r.a.createElement(B.a,{span:8},r.a.createElement(T.a,{layout:"inline",style:{width:"100%"}},r.a.createElement(T.a.Item,{label:"Exclude Countries",style:{width:"100%"}},r.a.createElement(D.a,{mode:"multiple",style:{width:"100%"},placeholder:"Exclude Countries...",onChange:function(e){return t(Object(S.a)({},a,{excludedCountries:e}))},value:a.excludedCountries,size:"small"},I.map((function(e){return r.a.createElement(_,{key:e},e)})))))),r.a.createElement(B.a,{span:3},r.a.createElement(T.a,{layout:"inline",style:{width:"100%"}},r.a.createElement(T.a.Item,{label:"Logarithmic",style:{width:"100%"}},r.a.createElement(O.a,{onChange:function(e){return t(Object(S.a)({},a,{isLogarithmic:e}))},checked:a.isLogarithmic})))),r.a.createElement(B.a,{span:5},r.a.createElement(T.a,{layout:"inline",style:{width:"100%"}},r.a.createElement(T.a.Item,{label:"Extrapolated days",style:{width:"100%"}},r.a.createElement(V.a,{size:"small",min:0,max:30,defaultValue:3,onChange:function(e){return t(Object(S.a)({},a,{extrapolatedDays:e}))},value:a.extrapolatedDays}))))))},R=(t(863),m.a.Header),U=m.a.Content;var G=function(){var e=Object(n.useState)({selectedCountries:[],excludedCountries:[],isLogarithmic:!1,extrapolatedDays:7}),a=Object(u.a)(e,2),t=a[0],l=a[1],i=Object(n.useState)(),o=Object(u.a)(i,2),d=o[0],h=o[1],p=Object(n.useState)(!1),g=Object(u.a)(p,2),f=g[0],y=g[1],E=function(){var e=Object(s.a)(c.a.mark((function e(){var a,n,r,l,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("fetching data from server"),e.prev=1,t.extrapolatedDays){e.next=4;break}return e.abrupt("return");case 4:return y(!0),a=t.selectedCountries,n=t.excludedCountries,r=t.extrapolatedDays,l={extrapolation_days:r,selected_countries:a.length?a.join(","):void 0,excluded_countries:n.length?n.join(","):void 0},console.log("params: ",l),e.next=10,A.a.get("http://localhost:8080/all",{params:l});case 10:i=e.sent,o=i.data,console.log("got data from server: ",o),h(o),y(!1),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(1),console.error("Error while fetching data: ",e.t0.message),y(!1);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var e=setTimeout((function(){E()}),1e3);return function(){return clearTimeout(e)}}),[t.extrapolatedDays,t.selectedCountries,t.excludedCountries]),r.a.createElement("div",{className:"App"},r.a.createElement(m.a,null,r.a.createElement(U,{style:{height:"98vh"}},r.a.createElement(R,null,r.a.createElement("h1",{style:{color:"white"}},"Coronavirus Forecasts (Please stay at home and save lives)")),r.a.createElement(x.a,{style:{height:".5em"}}),r.a.createElement(x.a,{gutter:24,style:{paddingLeft:".5em",paddingRight:".5em"}},r.a.createElement(B.a,{span:24},r.a.createElement(F,{filterValues:t,setFilterValues:l}))),r.a.createElement(x.a,{style:{height:".5em"}}),r.a.createElement(x.a,{gutter:8,style:{paddingLeft:".5em",paddingRight:".5em"}},r.a.createElement(B.a,{span:4},r.a.createElement(C,{rawData:d,filterValues:t,isLoading:f})),r.a.createElement(B.a,{span:20},r.a.createElement(b,{filterValues:t,rawData:d,isLoading:f}))),r.a.createElement(x.a,{style:{height:".5em"}}),r.a.createElement(x.a,{gutter:8,style:{paddingLeft:".5em",paddingRight:".5em"}},r.a.createElement(B.a,{span:24},r.a.createElement(M,{filterValues:t,setFilterValues:l}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[380,1,2]]]);
//# sourceMappingURL=main.56f02279.chunk.js.map